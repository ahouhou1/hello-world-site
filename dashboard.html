<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dashboard</title>
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
<main class="container section">
  <div class="card">
    <h2>Dashboard</h2>
    <p id="userEmail" class="mt-1"></p>
    <button id="logout" class="button mt-2">Logout</button>
  </div>
</main>

<script type="module">
import { supabase } from "./js/supabase.js";

const { data: { user } } = await supabase.auth.getUser();
if (!user) {
  alert("Please log in");
  location.href = "login.html";
} else {
  document.getElementById("userEmail").textContent = "Logged in as: " + user.email;
}

document.getElementById("logout").onclick = async () => {
  await supabase.auth.signOut();
  location.href = "login.html";
};
</script>
</body>
</html>
